# Unix Shell

Search Tag(s): #post-exploitation #enumeration-and-discovery #windows

## 01 - NetExec

```
$ netexec smb <IP> -u "<username>" -p "<password>" [-d <domain_name> | --local-auth] --wmi "SELECT Caption,ExecutablePath,CommandLine FROM Win32_Process"
```

## 02 - Impacket

Authentication syntax.

```
$ wmiquery.py [<domain_name>/]<username>:"<password>"@<IP>

$ wmiquery.py [<domain_name>/]<username>@<IP> -hashes :<nt_hash>
```

Query process names and identifiers.

```
WQL> SELECT * FROM Win32_Process WHERE NAME like 'cmd%%'

WQL> SELECT Caption,ExecutablePath,CommandLine FROM Win32_Process

WQL> SELECT Caption,Name,OSName,ExecutablePath,ProcessId,WindowsVersion,CommandLine FROM Win32_Process

WQL> SELECT Caption,Name,OSName,ExecutablePath,ProcessId,WindowsVersion,ParentProcessId,SessionId,CommandLine FROM Win32_Process
```