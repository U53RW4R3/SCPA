# Change Password

## 01 - Unix Shell

Ch- ange the user's password

```
$ sudo echo "<username>:<password>" | chpasswd

$ sudo echo "root:notsosecure" | chpasswd
```

- You can perform a STDIN to let `chpasswd` read a file

`$ sudo chpasswd < users_passwords.txt`

## 02 - Command Prompt

```
C:\> net user <username> <new_password>

C:\> echo <new_password> | net user <username> *
```

## 03 - Powershell

```
PS C:\> Set-LocalUser -Name <username> -Password (ConvertTo-SecureString "<Password>" -AsPlainText -Force)

PS C:\> Set-ADAccountPassword <username> -Reset -NewPassword (ConvertTo-SecureString "<Password>" -AsPlainText -Force)

PS C:\> Set-ADUser <username> -ChangePasswordAtLogon $true
```

## 04 - Metasploit

TODO: Fill this info

### 4.1 - Meterpreter

#### 4.1.1 - Kiwi

##### 4.1.1.1 - Help Menu

`meterpreter > password_change -h`

##### 4.1.1.2 - Usage

`meterpreter > password_change -u <username> -p <password> -P`

`meterpreter > password_change -u <username> -n <nt_hash> -P`

### 4.2 - Modules

#### 4.2.1 - Post

`meterpreter > run post/windows/manage/change_password`


## References

- [GeeksforGeeks ChPasswd Command in Linux with examples](https://www.geeksforgeeks.org/chpasswd-command-in-linux-with-examples/)

- [Hacktricks Privilege Escalation Payloads to Execute Change Root Password](https://book.hacktricks.xyz/linux-unix/privilege-escalation/payloads-to-execute#change-root-password)

- [Manipulating User Passwords Without Mimikatz](https://www.trustedsec.com/blog/manipulating-user-passwords-without-mimikatz/)