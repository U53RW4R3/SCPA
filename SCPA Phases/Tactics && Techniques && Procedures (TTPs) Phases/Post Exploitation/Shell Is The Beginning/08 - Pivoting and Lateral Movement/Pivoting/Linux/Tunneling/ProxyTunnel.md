# ProxyTunnel

## 01 - Help Menu

```
$ proxytunnel --help
proxytunnel 1.10.20210128 Copyright 2001-2020 Proxytunnel Project
Usage: proxytunnel [OPTIONS]...
Build generic tunnels through HTTPS proxies using HTTP authentication

Standard options:
 -i, --inetd                Run from inetd (default: off)
 -a, --standalone=INT       Run as standalone daemon on specified port
 -p, --proxy=STRING         Local proxy host:port combination
 -r, --remproxy=STRING      Remote proxy host:port combination (using 2 proxies)
 -d, --dest=STRING          Destination host:port combination
 -e, --encrypt              SSL encrypt data between local proxy and destination
 -E, --encrypt-proxy        SSL encrypt data between client and local proxy
 -X, --encrypt-remproxy     SSL encrypt data between local and remote proxy
 -W, --wa-bug-29744         Workaround ASF Bugzilla 29744: if SSL is active stop
                            using it after CONNECT (might not work on all setups; see
                            /usr/share/doc/proxytunnel/README.Debian.gz)
 -B, --buggy-encrypt-proxy  Equivalent to -E -W, provided for backwards
                            compatibility
 -L                         (legacy) enforce TLSv1 connection
 -T, --no-ssl3              Do not connect using SSLv3

Additional options for specific features:
 -z, --no-check-certificate Don't verify server SSL certificate
 -C, --cacert=STRING        Path to trusted CA certificate or directory
 -F, --passfile=STRING      File with credentials for proxy authentication
 -P, --proxyauth=STRING     Proxy auth credentials user:pass combination
 -R, --remproxyauth=STRING  Remote proxy auth credentials user:pass combination
 -N, --ntlm                 Use NTLM based authentication
 -t, --domain=STRING        NTLM domain (default: autodetect)
 -H, --header=STRING        Add additional HTTP headers to send to proxy
 -o STRING                  send custom Host Header
 -x, --proctitle=STRING     Use a different process title

Miscellaneous options:
 -v, --verbose              Turn on verbosity
 -q, --quiet                Suppress messages
 -h, --help                 Print help and exit
 -V, --version              Print version and exit
```

## 02 - Usage

`$ proxytunnel -a <local_PORT> [-E] -p <HTTP_SOCKS_server_IP>:<HTTP_SOCKS_server_PORT> [-P <username>:<password>] -d <remote_IP>:<remote_PORT>`

## 03 - Scenarios

### 3.1 - Bind SSH port as HTTPS

```
$ proxytunnel -a <local_PORT> [-E] -p <HTTP_SOCKS_server_IP>:<HTTP_SOCKS_server_PORT> [-P <username>:<password>] -d <remote_SSH_IP>:<remote_SSH_PORT>

$ ssh -p <local_PORT> <username>@localhost
```

### 3.2 - Bind SMTP port as HTTPS

TODO: Fill this info

- Great for bypassing the spam filter

```
$ proxytunnel -a <local_PORT> [-E] -p <HTTP_SOCKS_server_IP>:<HTTP_SOCKS_server_PORT> [-P <username>:<password>] -d <remote_SMTP_IP>:<remote_SMTP_PORT>

$ swaks
```

TODO: Demonstrate to leverage http proxy web servers CONNECT method via netcat to spawn a shell (it's included in **Pentesting with Backtrack** book)

TODO: Use nuclei, nmap or metasploit to scan open **ANONYMOUS CONNECT Proxy** in the internet

- HTTP Squid Proxy
- HTTP Tiny proxy

---
## References

- [ProxyTunnel](https://proxytunnel.sourceforge.io/)

- [ProxyTunnel: Paper](https://proxytunnel.sourceforge.io/paper.php)

- [[Tactics && Techniques && Procedures (TTPs) Phases/Information Gathering/02 - Active Fingerprinting/Enumeration/Network Protocols/HTTP/02 - Detecting HTTP Methods/Manual|Nmap: Detecting HTTP Methods]]

- [[Tactics && Techniques && Procedures (TTPs) Phases/Information Gathering/02 - Active Fingerprinting/Enumeration/Network Protocols/HTTP/06 - HTTP Enumeration/Manual|Manual: HTTP Enumeration]]