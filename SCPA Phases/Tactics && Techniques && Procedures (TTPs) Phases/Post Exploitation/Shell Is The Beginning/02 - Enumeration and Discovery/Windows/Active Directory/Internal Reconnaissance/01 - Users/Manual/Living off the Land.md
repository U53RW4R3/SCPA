# Living off the Land

### 1.1 - Command Prompt

- Enumerate current user

```
C:\> whoami /fqdn

C:\> whoami /upn
```


- Enumerate user

```
C:\> net user <username> /domain

C:\> net user %username% /domain
```

- Enumerate domain users

`C:\> net user /domain`

`C:\> set userdomain`

- Enumerate domain admins

```
C:\> net group "Domain Admins" /domain

C:\> net group "Enterprise Admins" /domain
```

### 1.2 - Powershell

#### 1.2.1 - Users

- Import Module

`PS C:\> Import-Module ActiveDirectory`

- Find obsolete users

`PS C:\> Get-ADUser -Filter { -Not (ScriptPath -Like "*")}`

#### 1.2.2 - Groups

`PS C:\> Get-LocalGroup | ft Name -AutoSize`

```
PS C:\> Get-LocalGroupMember "<Local_group_name>" | ft Name, PrincipalSource

PS C:\> Get-LocalGroupMember Administrators | ft Name, PrincipalSource
```