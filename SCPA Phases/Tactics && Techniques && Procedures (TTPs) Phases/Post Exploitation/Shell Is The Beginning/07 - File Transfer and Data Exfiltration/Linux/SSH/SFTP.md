# SFTP

## 01 - Setup

### 1.1 - Hardening

```
$ sudo groupadd sftpusers

$ sudo mkdir -p /var/www/sftp/

$ sudo useradd -g sftpusers -s /bin/false -M aiden

$ passwd aiden

$ sudo chown aiden:sftpusers /var/www/sftp/

$ sudo usermod -d /var/www/sftp/ -g sftpusers aiden
```

`$ cat /etc/ssh/sshd_config`

---

```
# Subsystem     sftp    /usr/libexec/openssh/sftp-server
Subsystem       sftp    internal-sftp

Match Group sftpusers
        # ChrootDirectory %h
        ChrootDirectory /path/to/sftp/directory/
        ForceCommand internal-sftp
        AllowTcpForwarding no
        PermitTunnel no
        X11Forwarding no
        PermitTTY no
        PasswordAuthentication yes
```

`$ sudo systemctl restart sshd`

### 1.2 - Usage

```
$ sftp <username>@<IP>

$ sftp -P <PORT> <username>@<IP>
```