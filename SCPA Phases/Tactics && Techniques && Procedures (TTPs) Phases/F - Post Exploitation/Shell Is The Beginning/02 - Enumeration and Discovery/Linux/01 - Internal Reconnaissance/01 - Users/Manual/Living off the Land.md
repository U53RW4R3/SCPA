# Living off the Land

## 01 - Account

- Enumerate what user account you're logged in as

```
$ id

$ whoami

$ who am i
```

## 02 - Enumerate User Accounts

- List of users

```
$ getent passwd

$ cat /etc/passwd

$ cat /etc/passwd-

$ column -t -s ":" -N "USER,NONE,USER_ID,GROUP_ID,DESCRIPTION,PATH,SHELL" -o "|" /etc/passwd

$ cut -d ":" -f 1 /etc/passwd

$ grep "sh$" /etc/passwd

$ cat /etc/passwd | grep "sh$" | cut -d ":" -f 1

$ cat /etc/passwd | grep "sh$" | awk -F ":" '{print $1}'
```

- List of group users

`$ cat /etc/group`

- List of super users

```
$ grep "sudo:\|adm:" /etc/group

$ grep -v -E "^#" /etc/passwd | awk -F: '$3 == 0 {print $1}'

$ awk -F ':' '($3 == "0") {print}' /etc/passwd

$ sudo cat /etc/sudoers

$ sudo -l
```

- Display user and group information

```
$ id

$ for user in $(awk -F ":" '{print $1}' /etc/passwd); do id $user 2>/dev/null; done

$ for user in $(cut -d ":" -f1 /etc/passwd); do id $user 2>/dev/null; done
```

- Check password validity period.

```
$ passwd -S <username>

$ passwd -S $USER

$ for user in $(awk -F ":" '{print $1}' /etc/passwd); do passwd -S $user 2>/dev/null; done

$ for user in $(cut -d ":" -f1 /etc/passwd); do passwd -S $user 2>/dev/null; done
```

## 03 - Logged On Users

- Identify the users who were logged in

```
$ who

$ who -a

$ who -uH
```

- Same exact thing of the `who` command but it enumerates even further to check what the users activities determining what they are interacting. Moreover, you can also see commands.

`$ w`

- Last users who were logged on.

```
$ last

$ last -i

$ last -a

$ sudo lastb
```