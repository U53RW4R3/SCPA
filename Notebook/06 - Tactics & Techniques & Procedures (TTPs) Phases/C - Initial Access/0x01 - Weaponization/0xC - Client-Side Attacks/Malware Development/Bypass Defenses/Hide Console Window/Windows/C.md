# C

| Window          | Integer Value | Description     |
| --------------- | ------------- | --------------- |
| `SW_HIDE`       | 0             | Show Window     |
| `SW_SHOWNORMAL` | 1             | Hide Window     |
| `SW_MINIMIZE`   | 7             | Minimize Window |

```c
#include <windows.h>
#include <winuser.h>

#pragma comment(lib, "user32.lib")

void HideWindow() {
    HWND handle_window = GetConsoleWindow();
    ShowWindow(handle_window, SW_MINIMIZE);
    ShowWindow(handle_window, SW_HIDE);
}

void InvisibleWindow() {
    HWND handle_window = GetConsoleWindow();
    ShowWindowAsync(handle_window, SW_MINIMIZE);
    ShowWindowAsync(handle_window, SW_HIDE);
}

void HideConsole() {
    FreeConsole();
}

void InvisibleConsole() {
    HWND handle_window;

    // Allocate a new console
    AllocConsole();

    // Find the previous Window handler and hide/show the window depending upon the next command
    handle_window = FindWindowA("ConsoleWindowClass", NULL);
    ShowWindow(handle_window, SW_SHOWNORMAL);
}

int main() {
	HideWindow();
	InvisibleWindow();
	HideConsole();

	return 0;
}
```

Compile the payload.

```
$ x86_64-w64-mingw32-gcc -l user32 -o payload.exe payload.c
```

---
## References

### MalAPI

- [MalAPI: `ShowWindow`](https://malapi.io/winapi/ShowWindow)