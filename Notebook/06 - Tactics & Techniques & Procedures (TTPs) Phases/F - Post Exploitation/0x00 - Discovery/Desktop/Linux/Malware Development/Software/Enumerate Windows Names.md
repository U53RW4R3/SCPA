# Enumerate Windows Names

```c
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <winuser.h>

#pragma comment(lib, "user32.lib")

BOOL CALLBACK EnumWindowChild(HWND child_handle, LPARAM long_parameter) {
    int window_length;
    char *window_text;

    if (!(window_length = GetWindowTextLengthA(child_handle)))
        return 1;

    // If window is invisible then skip and check the next window
    if (!IsWindowVisible(child_handle))
        return 1;

    printf("Window Length: %d\n", window_length++);

    window_text = malloc(window_length);
    GetWindowText(child_handle, window_text, window_length);
    printf("Title: %s\n\n", window_text);

    free(window_text);
}

BOOL CALLBACK EnumWindowProcess(HWND window_handle, LPARAM long_parameter) {
    int window_length;
    char *window_text;

    if (!(window_length = GetWindowTextLengthA(window_handle)))
        return 1;

    // If window is invisible then skip and check the next window
    if (!IsWindowVisible(window_handle))
        return 1;

    printf("Window Length: %d\n", window_length++);

    window_text = malloc(window_length);
    // GetWindowText(window_handle, window_text, window_length);
    GetChildWindows(window_handle, &EnumWindowChild, 0);
    printf("Title: %s\n\n", window_text);

    free(window_text);
}

int main() {
    EnumWindows(&EnumWindowProcess, 0);
    return 0;
}
```

```
$ x86_64-w64-mingw32-gcc -l user32 -o payload.exe payload.c
```

---
## References

### Microsoft

- [Microsoft Documentation: `GetWindowTextA`](https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getwindowtexta)

- [Microsoft Documentation: `GetWindowTextW`](https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getwindowtextw)

- [Microsoft Documentation: `IsWindowVisible`](https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-iswindowvisible)

### MalAPI

- [MalAPI: `EnumWindows`](https://malapi.io/winapi/EnumWindows)

### 0xD3struction

- [0xD3struction: CHANGE EVERY WINDOW NAME IN WINDOWS (C\C++)](https://www.youtube.com/watch?v=1Y2ak4lfgOg)