# Read File

Brief: "Reads data from the specified file or input/output (I/O) device. Reads occur at the position specified by the file pointer if supported by the device. This function is designed for both synchronous and asynchronous operations. For a similar function designed solely for asynchronous operation, see ReadFileEx."

> [!NOTE]
> The argument` lpBuffer (void*)` is a pointer to any contiguous memory location or any data without any internal pointer.


`CloseHandle()` - Closes an open object handle.

This function can close all types of handles, including: file, I/O completion port, mutex, pipe, console input, console screen buffer, access token and so on.

```c
#include <windows.h>
#include <fileapi.h>

#pragma comment(lib, "kernel32.lib")

int main() {

	const char *filename = "filename.txt";

	HANDLE file = CreateFileA(filename, GENERIC_READ, FILE_SHARE_READ, NULL, OPEN_EXISTING, 0, NULL);

	if (file == INVALID_HANDLE_VALUE) {
        printf("Couldn't open file\n");
        return EXIT_FAILURE;
    }

    DWORD read = 0;
    if (!ReadFile(file, data, DATA_SIZE, &read, NULL) || read != DATA_SIZE) {
        printf("Failed to read the whole file\n");
        return EXIT_FAILURE;
    }

	CloseHandle(file);

	printf("%s", data);

	return EXIT_SUCCESS;
}
```

```
$ x86_64-w64-mingw32-gcc -l kernel32 -o read_file.exe read_file.c
```

---
## References

### Microsoft

- [Microsoft Documentation: `ReadFile`](https://learn.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-readfile)

- [Microsoft Documentation: `ReadFileEx`](https://learn.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-readfileex)

### InstallSetupConfig

- [InstallSetupConfig: The Windows File Management 23](https://www.installsetupconfig.com/win32programming/windowsfileapis4_22.html)

- [InstallSetupConfig:  The Windows File Management 25](https://www.installsetupconfig.com/win32programming/windowsfileapis4_24.html)

### Niraj Kharel

- [Niraj Kharel: Offensive C++ Basics](https://nirajkharel.com.np/posts/offensive-cplusplus-basics/)