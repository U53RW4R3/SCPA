---
author(s):
  - Userware
tags:
  - post-exploitation
  - pivot
  - tunneling
  - scenarios
  - networking
  - http
  - linux
---
# HTTP Tunneling

## 01 - Setup

### 1.1 - Package Manager

#### 1.1.1 - Ubuntu/Debian Distros

```
$ sudo apt install -y httptunnel
```

You can just download the `.deb` file and extract it.

```
$ apt download httptunnel

$ dpkg -x httptunnel_*.deb work
```

Then you can just execute the program as it was portable.

```
$ work/usr/bin/hts -V

$ work/usr/bin/htc -V
```

#### 1.1.2 - Red Hat Distros

```
$ dnf download httptunnel
```

#### 1.1.3 - Arch Linux Distros

```
$ URL="$(pacman -Sp httptunnel)

wget $URL

tar --zstd -xf httptunnel-*.pkg.tar.zst
```

Then you can just execute the program as it was portable.

```
$ usr/bin/hts -V

$ usr/bin/htc -V
```

### 1.2 - Compile

Clone the repository

```
$ git clone https://github.com/larsbrinkhoff/httptunnel.git && cd httptunnel/
```

Another way is to download the tarball file through FTP while authenticated anonymously.

```
$ wget --no-hsts ftp://ftp.gnu.org/pub/gnu/httptunnel/httptunnel-3.3.tar.gz

$ curl ftp://ftp.gnu.org/pub/gnu/httptunnel/httptunnel-3.3.tar.gz

$ tar xzf httptunnel-3.3.tar.gz && cd httptunnel-3.3/
```

Compile the source code.

```
$ ./configure && make
```

## 02 - Usage

HTTP Tunneling will encapsulate any protocol of whatever port you're trying to port forward it. This is not commonly used and it's great way to circumvent deep packet inspection since the network traffic stream will display as as there's a webserver interaction or something so it will be harder to detect since it is commonly used.

Here's the syntax usage.

```
$ hts --forward-port localhost:<bind_port> <local_port>

$ htc --forward-port <local_port> <HTTPTunnel_server_IP> <bind_port>
```

## 03 - Scenarios

### 3.1 - Bind SSH Port

HTTP Proxy tunnel server (target)

```
$ hts --forward-port localhost:22 80
```

HTTP Proxy tunnel client (attacker)

```
$ htc --forward-port 4848 <HTTPTunnel_server_IP>:80

$ ssh -p 4848 <username>@localhost
```

### 3.2 - Poor man's HTTP VPN

TODO: Replicate this link https://backreference.org/2011/06/19/poor-mans-http-vpn/index.html

```
root@server:~# socat 'exec:hts -s' 'TUN:10.0.0.1/24,iff-up'
```

```
root@hackware-os:~# socat 'exec:htc -s 192.168.4.18' 'TUN:10.0.0.2/24,iff-up'
```

---
## References

### Backlinks

- [[AUR|File Transfer and Data Exfiltration: Linux Package Manager AUR]]

### Source Repositories

- [HTTPTunnel](https://github.com/larsbrinkhoff/httptunnel)

### HTTPTunnel

- [GNU HTTPTunnel](https://www.nocrew.org/software/httptunnel.html)

### Arch Linux Wiki

- [Arch Linux Wiki: HTTP Tunneling](https://wiki.archlinux.org/title/HTTP_tunneling)

### Catharsis

- [Catharsis: Network Pivoting and Tunneling Guide](https://catharsis.net.au/blog/network-pivoting-and-tunneling-guide/)

### FareedFauzi

- [FareedFauzi OSCP Playbook: Port Forwarding SSH Tunneling](https://fareedfauzi.gitbook.io/oscp-notes/others/port-forwarding-ssh-tunneling)