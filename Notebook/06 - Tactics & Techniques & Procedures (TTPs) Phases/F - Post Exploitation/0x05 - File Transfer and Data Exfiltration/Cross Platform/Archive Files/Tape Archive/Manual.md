---
author(s):
  - Userware
tags:
  - post-exploitation
  - file-transfer-and-data-exfiltration
  - archive-files
  - cross-platform
---
# Manual

## 01 - Common Files

### 1.1 - Linux

```
/usr/bin/tar
```

### 1.2 - Windows

```
c:\Windows\SysWoW64\tar.exe
%windir%\SysWoW64\tar.exe
```

Locate tarball executable program

```
C:\> where.exe tar.exe

PS C:\> Get-Command tar.exe | Format-Table CommandType, Name, Definition
```

## 02 - Archive

### 2.1 - Basics

The gzip (GNU zip) (`.tar.gz` or `.tgz`) file extension has moderate compression ratio but fast speed.

```
> tar czf archive.tar.gz folder

> tar -czvf archive.tar.gz folder
```

The bzip2 (`.tar.gz2`) file extension has high compression ratio but slower than gzip.

```
> tar cjf archive.tar.bz2 folder
```

The xz (`.tar.xz`) file extension has a very high compression ratio but slower than bzip2.

```
> tar cJf archive.tar.xz folder
```

## 03 - Extract

```
$ tar xzf archive.tar.gz

$ tar xjf archive.tar.bz2

$ tar xJf archive.tar.xz
```

You can specify the path where to extract.

```
$ tar -C /path/to/directory -xzf archive.tar.gz
```

## 04 - Scenarios

### 4.1 - Split Volumes

Split into multiple files.

```
$ tar cjf archive.tar.bz2 folder

$ split -b 650MB archive.tar.bz2 "archive.tar.bz2.part"

$ tar cvzf - folder/ | split -b 650MB - "archive.tar.gz.part"
```

Join the split volumes into one file.

```
$ cat archive.tar.bz2.parta* > archive-full.tar.bz2
```

### 4.2 - Match specific extensions then archive the files

```
$ find /path/to/directory -type f \( -name "*.txt" -o -name "*.pdf" -o -name "*.doc" -o -name "*.docx" -o -name "*.jpg" -o -name "*.jpeg" -o -name "*.png" -o -name "*.ppt" -o -name "*.pptx" -o -name "*.xls" -o -name "*.xlsx" \) -exec tar -czf file.tar.gz {} + 2>&1

$ find /path/to/directory -type f -regex ".*\.\(txt\|pdf\|doc\|docx\|jpg\|jpeg\|png\|ppt\|pptx\|xls\|xlsx)" -exec tar -czf file.tar.gz {} + 2>&1
```