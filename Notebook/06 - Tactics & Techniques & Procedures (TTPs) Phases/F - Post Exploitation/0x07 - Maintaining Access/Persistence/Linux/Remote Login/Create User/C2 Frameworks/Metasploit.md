# Metasploit

```
msf > use post/linux/manage/adduser

msf post(linux/manage/adduser) > options 

Module options (post/linux/manage/adduser):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   GROUPS                     no        Set what groups the new user will be part of separated with a space
   HOME                       yes       Set the home directory of the new user. Leave empty if user will have no home directory
   PASSWORD  Metasploit$1     yes       The password for this user
   SESSION                    yes       The session to run this module on
   SHELL     /bin/sh          yes       Set the shell that the new user will use
   USERNAME  metasploit       yes       The username to create


View the full module info with the info, or info -d command.

msf post(linux/manage/adduser) > advanced 

Module advanced options (post/linux/manage/adduser):

   Name              Current Setting  Required  Description                                                                                                                                                                                                                                                       
   ----              ---------------  --------  -----------                                                                                                                                                                                                                                                       
   MissingGroups     ERROR            yes       Set how nonexisting groups are handled on the system. Either give an error in the module, ignore it and throw it out, or create the group on the system. (Accepted: ERROR, IGNORE, CREATE)                                                                        
   PasswordHashType  MD5              yes       Set the hash method your password will be encrypted in. (Accepted: DES, MD5, SHA256, SHA512)                                                                                                                                                                      
   SudoMethod        GROUP            yes       Set the method that the new user can obtain root. SUDO_FILE adds the user directly to sudoers while GROUP adds the new user to the sudo group (Accepted: SUDO_FILE, GROUP, NONE)                                                                                  
   UseraddMethod     AUTO             yes       Set how the module adds in new users and groups. AUTO will autodetect how to add new users, MANUAL will add users without any binaries, and CUSTOM will attempt to use a custom designated binary (Accepted: AUTO, MANUAL, CUSTOM)                                
   VERBOSE           false            no        Enable detailed status messages                                                                                                                                                                                                                                   
   WORKSPACE                          no        Specify the workspace for this module


   When UseraddMethod is CUSTOM:

   Name           Current Setting  Required  Description
   ----           ---------------  --------  -----------
   UseraddBinary                   no        Set binary used to set password if you dont want module to find it for you.


View the full module info with the info, or info -d command.

msf post(linux/manage/adduser) > set username <username>

msf post(linux/manage/adduser) > set password <password>

msf post(linux/manage/adduser) > set passwordhashtype <des | md5 | sha256 | sha512>

msf post(linux/manage/adduser) > set shell </bin/sh | /bin/bash>

msf post(linux/manage/adduser) > set missinggroups <error | ignore | create>

msf post(linux/manage/adduser) > set sudomethod <sudo_file | group | none>

msf post(linux/manage/adduser) > set useraddmethod <auto | manual | custom>

msf post(linux/manage/adduser) > run
```

---
## References

### Backlinks

- [[06 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x07 - Maintaining Access/Persistence/Windows/Host Persistence/Remote Login/Create User/Malware Development/Helpers]]