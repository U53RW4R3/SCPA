# Example Config

```
{
 "serverDomain" : "[SUBDOMAIN]",
 "workerThreads" : 10,
 "eventCapture": {
  "localAddress" : ["[INTERNAL_IP]", "127.0.0.1"],
  "publicAddress" : "[EXTERNAL_IP]",
  "http": {
   "ports" : 80
  },
  "https": {
   "ports" : 443
  },
  "smtp": {
   "ports" : [25, 587]
  },
  "smtps": {
   "ports" : 465
  },
  "ssl": {
   "certificateFiles" : [
    "/etc/letsencrypt/archive/[SUBDOMAIN]/privkey1.pem",
    "/etc/letsencrypt/archive/[SUBDOMAIN]/cert1.pem"
   ]
  }
 },
 "polling" : {
  "localAddress" : "[INTERNAL_IP]",
  "publicAddress" : "[EXTERNAL_IP]",
  "http": {
   "port" : 9090
  },
  "https": {
   "port" : 9443
  },
  "ssl": {
   "certificateFiles" : [
    "/etc/letsencrypt/archive/[SUBDOMAIN]/privkey1.pem",
    "/etc/letsencrypt/archive/[SUBDOMAIN]/cert1.pem"
   ]
  }
 },
 "metrics": {
  "path" : "[METRICS_PATH]",
  "addressWhitelist" : ["[METRICS_WHITELIST]"]
 },
 "dns": {
  "interfaces" : [{
   "name":"ns1",
   "localAddress":"[INTERNAL_IP]",
   "publicAddress":"[EXTERNAL_IP]"
  }],
  "ports" : 53
 },
 "logLevel" : "INFO"
}
```

## Configure TLS

Great instructions for Lets Encrypt with Collaborator: https://blog.fabiopires.pt/running-your-instance-of-burp-collaborator-server/

Override Burpâ€™s default launcher

You should be able to locate this file in `[BURP_LAUNCHER]`. As root, edit this file. Near the top of the file, you are going to want to change:

```
# Uncomment the following line to add additional VM parameters
#INSTALL4J_ADD_VM_PARAMS=

To

# Uncomment the following line to add additional VM parameters
INSTALL4J_ADD_VM_PARAMS="-Djavax.net.ssl.trustStore=/etc/ssl/certs/java/cacerts"
```

This will tell the virtual machine to use the Java KeyStore which contains the LetsEncrypt certificates we inserted at an earlier date.

## Setup as a service

```
$ sudo cat > /etc/systemd/system/collaborator.service << EOF
[Unit]
Description=Burp Collaborator Server Daemon
After=network.target

[Service]
Type=simple
User=collaborator
UMask=007
ExecStart=/usr/bin/java -Xms10m -Xmx200m -XX:GCTimeRatio=19 -jar /usr/local/collaborator/burpsuite_pro_1.7.33.jar --collaborator-server --collaborator-config=/usr/local/collaborator/collaborator.config
Restart=on-failure

# Configures the time to wait before service is stopped forcefully.
TimeoutStopSec=300

[Install]
WantedBy=multi-user.target
EOF
```

Enable the service:

```
# systemctl enable collaborator
```

Finally, start the service:

```
# systemctl start collaborator
```