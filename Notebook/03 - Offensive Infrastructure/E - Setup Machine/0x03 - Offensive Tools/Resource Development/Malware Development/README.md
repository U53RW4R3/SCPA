---
author(s):
  - Userware
tags:
  - malware-development
---
# Description

## Required Tools

- A **text editor** or **IDE** for payload development. I recommend [Embarcadero](https://github.com/Embarcadero/Dev-Cpp) (in a Windows OS) or [Code Blocks](https://www.codeblocks.org/downloads/binaries/) as a starting point and it comes with a with it's MinGW compiler.

- A **compiler**. We will use C and C++ to understand how WinAPI and NtAPI functions. This is essential for payload development to build our executable programs. Visit this link (https://visualstudio.microsoft.com/downloads/) and search for **"Build Tools for Visual Studio 2022"**. To cross-compile windows binaries in Linux install [mingw-w64](https://musl.cc/) stable release. Refer to this [[03 - Offensive Infrastructure/E - Setup Machine/0x01 - Essentials/Compilers/Windows/C|section]] of how you can install it.

- **x64dbg** debugger to analyze and understand how the internal modules work in the developed malware.

- **PE-Bear** and **pestudio** to inspect PE files to look for indicators.

- **Process Hacker** to inspect processes.

- A shellcode generator. [[Commands#^30fd5f|MSFVenom]] has payload modules to aid us for payload development.

- Calculate [[Entropy|entropy]] for static signatures.

- [[ThreatCheck]] and [[06 - Tactics & Techniques & Procedures Phases/F - Post Exploitation/0x01 - Defense Evasion/08 - Obfuscate Artifacts/Obfuscation/Malware Development/Shellcode/Windows/Helpers/Identify Detection Triggers/AVRed/Client|AVRed]] to find malicious offset bytes to assists us how to obfuscate the program.

## Additional Tools

- WiX to compile binary files into `.msi`.

- **ILSpy** or **dotPeek** to decompile .NET programs. **AvalonialLSpy** is cross platform.

---
## References

### IDE

- [Embarcadero IDE for Windows C++](https://www.embarcadero.com/free-tools/dev-cpp)

### Toolchains

- [[03 - Offensive Infrastructure/E - Setup Machine/0x01 - Essentials/Compilers/Windows/C|Mingw-w64]]

- [Microsoft Documentation: Use the Microsoft C++ toolset from the command line](https://learn.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=msvc-170)

- [Microsoft C++ Build Tools](https://visualstudio.microsoft.com/visual-cpp-build-tools)

### Decompilers

- [PyLingual](https://www.pylingual.io)

- [x64dbg](https://x64dbg.com)

- [AvalonialLSpy](https://github.com/icsharpcode/AvaloniaILSpy)

- [ILSpy](https://github.com/icsharpcode/ILSpy)

- [dotPeek](https://www.jetbrains.com/decompiler/)

### PE Inspection

- [PE-Bear](https://github.com/hasherezade/pe-bear)

- [pestudio](https://www.winitor.com/download2)

### Process Inspection

- [Process Hacker](https://processhacker.sourceforge.io/)

### Setup MSI

- [WiX Toolset](https://wixtoolset.org/)

- [GNOME: MSITools](https://wiki.gnome.org/msitools)

- [WiX Toolset v3 Tutorial](https://www.firegiant.com/docs/wix/v3/tutorial/)