# Fill Memory Allocation

> [!INFO]
> This method is referred as **Offer you have to refuse**.

## C

Allocate and fill 100 Megabytes of memory.

```c
#include <stdlib.h>
#include <string.h>

#define TOO_MUCH_MEMORY 10000000

int main() {
	char *memory_dump = NULL;
	memory_dump = (char *) malloc(TOO_MUCH_MEMORY);

	if (memory_dump != NULL) {
		memset(memory_dump, 00, TOO_MUCH_MEMORY);
		free(memory_dump);
		// execute payload here	
	}

	return 0;
}
```

## C\#

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MemoryFill {
    class Runner {
        static void Main(string[] args) {
            byte zeroVal = 1;
            byte[] data = new byte[32768 * 32768]; 
            Array.Clear(data, 0, data.Length); 
            Console.WriteLine("~1GB filled!");
            System.Threading.Thread.Sleep(1000);
            byte lastVal = (byte)data.GetValue((32768 * 32768)-1);

            if (lastVal.Equals(zeroVal)) {
                // execute payload here              
            }
        }
    }
}
```

---
## References

### Source Repositories

- [cinzinga: Evasion-Practice](https://github.com/cinzinga/Evasion-Practice)