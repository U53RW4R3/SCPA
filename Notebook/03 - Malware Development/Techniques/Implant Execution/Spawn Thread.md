# Spawn Thread

## CPP

```cpp
#include <iostream>
#include <vector>
#include <windows.h>

DWORD WINAPI downloadFile(LPVOID long_pointer_parameter) {
    std::string url = *(static_cast<std::string*>(long_pointer_parameter));
    std::cout << "Downloading file from: " << url < std::endl;

    // Add 5 seconds delay
    Sleep(5000);
    std::cout << "File downloaded successfully!" << std::endl;
    return 0;
}

int main() {
    // List of file URLs to download
    std::vector<std::string> fileURLs = {
        "http://website.com/banner.png",
        "http://website.com/README.md",
        "http://website.com/archive.zip"
    };
    
    // Create threads to download each file concurrently
    std::vector<HANDLE> threads;
    for (size_t i = 0; i < fileURLs.size(); ++i) {
        HANDLE thread_handle = CreateThread(NULL, 0, downloadFile, &fileURLs[i], 0, NULL);
        if (thread_handle != NULL)
            threads.push_back(thread_handle);
    }
    
    // Wait for all threads to finish
    WaitForMultipleObjects(threads.size(), threads.data(), TRUE, INFINITE);
    
    std::cout << "All files downloaded successfully!" << std::endl;
    
    return 0;
}
```

---
## References

- [RED TEAM: Malware Development - Part 3](https://sid4hack.medium.com/malware-development-part-3-669bebef79c4)