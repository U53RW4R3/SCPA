# Server

TODO: Show a step by step approach to setup the environment to analyze the malicious strings to plan for evasion.

## Setup

```
$ sudo apt install -y python3-bitstring python3-brotli python3-flask python3-flask-login python3-intervaltree python3-olefile python3-pefile python3-psutil python3-magic python3-pretty-yaml python3-pyaml-env python3-requests python3-tabulate python3-waitress python3-yara
```

```
$ pip install --break-system-packages ansi2html dncil dnfile hexdump oletools r2pipe
```

```
$ cat config.yaml 
server:
  amsi: "http://127.0.0.1:8001/"
password: ""
hashCache: True
WebMaxFileSizeMb: 50
```

## Help Menu

```
$ ./avred.py -h
usage: avred.py [-h] [-f FILE] [-u] [-s SERVER] [-e SCANSPEED] [-C] [--checkonly] [--reinfo] [--rescan] [--reverify] [--reaugment] [--reoutflank]

options:
  -h, --help            show this help message and exit
  -f FILE, --file FILE  File to scan
  -u, --uploads         Scan app/uploads/*
  -s SERVER, --server SERVER
                        Avred Server to use from config.json (default "amsi")
  -e SCANSPEED, --scanspeed SCANSPEED
                        1, 2, 3
  -C, --Config          Print config location and content
  --checkonly           Debug: Only check if AV detects the file as malicious
  --reinfo              Debug: Re-do the file info
  --rescan              Debug: Re-do the scanning for matches
  --reverify            Debug: Re-do the verification
  --reaugment           Debug: Re-do the augmentation
  --reoutflank          Debug: Re-do the Outflanking
```

---
## References

- [AVRed Server](https://github.com/dobin/avred-server)