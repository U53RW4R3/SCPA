---
author(s):
  - Userware
tags:
  - helpers
  - command-line
  - compiler
  - windows
---
# Scripts

TODO: Provide input flags and if statements depending on the architecture, adding resource icons, exe or dlls.

## Batch

```batch
@echo off

SET OutputFile=test.exe
SET CommonCompilerFlags=/utf-8 /std:c17 /W4 /nologo /fp:fast /fp:except- /GR- /EHa- /Oi
SET DebugCompilerFlags=/Od /Zi /MTd
SET ReleaseCompilerFlags=/O2 /MT /Zo /WX
SET CommonLinkerFlags=/INCREMENTAL:NO /OPT:REF /SUBSYSTEM:CONSOLE
SET ResourceFlags=

IF NOT EXIST build mkdir build
pushd build

IF NOT "%1"=="" (
    IF "%1"=="release" (
        SET CompilerMode=release
        SET CompilerFlags=%CommonCompilerFlags% %ReleaseCompilerFlags%
    ) ELSE (
        SET CompilerMode=debug
        SET CompilerFlags=%CommonCompilerFlags% %DebugCompilerFlags%
    )
) ELSE (
    SET CompilerMode=debug
    SET CompilerFlags=%CommonCompilerFlags% %DebugCompilerFlags%
)

IF NOT EXIST %CompilerMode% mkdir %CompilerMode%
pushd %CompilerMode%

del *.db > NUL 2> NUL

cl %CompilerFlags% ..\\..\\src\\main.c /link %CommonLinkerFlags% /OUT:%OutputFile%
SET LastError=%ERRORLEVEL%

popd
popd
```

```batch
@echo off

SET OutputFile=test.exe
SET CommonCompilerFlags=/utf-8 /std:c17 /W4 /nologo /fp:fast /fp:except- /GR- /EHa- /Oi /GS- /Gs999999999
SET DebugCompilerFlags=/Od /Zi /MTd
SET ReleaseCompilerFlags=/O2 /MT /Zo /WX
SET CommonLinkerFlags=/INCREMENTAL:NO /OPT:REF /SUBSYSTEM:CONSOLE /STACK:0x100000,0x100000 /ENTRY:programStart /NODEFAULTLIB Kernel32.lib
SET ResourceFlags=

IF NOT EXIST build mkdir build
pushd build

IF NOT "%1"=="" (
    IF "%1"=="release" (
        SET CompilerMode=release
        SET CompilerFlags=%CommonCompilerFlags% %ReleaseCompilerFlags%
    ) ELSE (
        SET CompilerMode=debug
        SET CompilerFlags=%CommonCompilerFlags% %DebugCompilerFlags%
    )
) ELSE (
    SET CompilerMode=debug
    SET CompilerFlags=%CommonCompilerFlags% %DebugCompilerFlags%
)

IF NOT EXIST %CompilerMode% mkdir %CompilerMode%
pushd %CompilerMode%

del *.db > NUL 2> NUL

cl %CompilerFlags% ..\\..\\src\\main.c /link %CommonLinkerFlags% /OUT:%OutputFile%
SET LastError=%ERRORLEVEL%

popd
popd
```

## PowerShell

```powershell
asdf
```

---
## References

- [[03 - Malware Development/Global Helpers/Programs/Compilers/Windows/C|Windows Compilers: C]]

- [[03 - Malware Development/Global Helpers/Programs/Compilers/Windows/CPP|Windows Compilers: C++]]