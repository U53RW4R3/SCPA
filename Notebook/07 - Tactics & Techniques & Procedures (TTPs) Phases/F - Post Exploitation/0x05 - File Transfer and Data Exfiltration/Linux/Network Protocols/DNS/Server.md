# DNS

## 01 - [[DNSChef]]

```
$ sudo dnschef --fakedomains <domain>.<tld> --fakeip 127.0.0.1 --interface 0.0.0.0 --logfile dnschef.log
```

## 02 - BIND9

```
$ sudo apt -y install bind9
```

## 03 - Dnsmasq

```
$ sudo apt install dnsmasq
```

## 04 - TCPDump

Monitor port 53

```
$ sudo tcpdump -i <interface> udp port 53
```

Decode results

```
$ echo "<base64_encoded>" | cut -d "." -f1-8 | tr -d "." | base64 -d
```

---
## References

- [Staged Payloads from Kali Linux | PT Phone Home â€“ DNS](https://www.offsec.com/offsec/staged-payloads-from-kalki-linux-pt-phone-hone-dns/)

- [Downloading Files Through Recursive DNS With Bash (Or PowerShell)](http://breenmachine.blogspot.com/2014/03/downloading-files-through-recursive-dns.html)

- [NotSoSecure: Out of Band Exploitation (OOB) CheatSheet](https://notsosecure.com/out-band-exploitation-oob-cheatsheet)

- [DNS exfiltration of data: step-by-step simple guide](https://hinty.io/devforth/dns-exfiltration-of-data-step-by-step-simple-guide/)

- [Setting Up Your Own Malicious DNS Server For Data Exfiltration (Without a DNS Server)](https://john-woodman.com/research/dns-exfiltration-setup/)

- [Deploy Self hosted interactsh-server for Blind & Out of Band Testing](https://takshilp.medium.com/oob-blind-testing-using-dns-exfiltration-54bcc004a0fb)

- [Data-Bouncing - The art of indirect exfiltration.](https://thecontractor.io/data-bouncing/)