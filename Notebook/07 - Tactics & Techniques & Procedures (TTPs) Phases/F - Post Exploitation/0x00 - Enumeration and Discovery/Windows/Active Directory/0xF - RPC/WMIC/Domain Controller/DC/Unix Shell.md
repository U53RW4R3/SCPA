---
author(s):
  - Userware
tags:
  - post-exploitation
  - enumeration-and-discovery
  - active-directory
  - staying-off-the-land
  - networking
  - network-protocols
  - msrpc
  - smb
  - windows
---
# Unix Shell

## 01 - MSRPC Port

TODO: Fill this info

Authentication syntax

```
$ wmiquery.py <domain>/<username>:<password>@<IP>

$ wmiquery.py <domain>/<username>@<IP> -hashes :<nt_hash>
```

Enumerate domains.

```
WQL> SELECT domaincontrolleraddress,domainname,roles FROM NtDomain
```

## 02 - SMB Port

```
$ netexec smb <IP> -u "<username>" -p "<password>" [-d <domain> | --local-auth] --wmi "SELECT domaincontrolleraddress,domainname,roles FROM NtDomain"
```