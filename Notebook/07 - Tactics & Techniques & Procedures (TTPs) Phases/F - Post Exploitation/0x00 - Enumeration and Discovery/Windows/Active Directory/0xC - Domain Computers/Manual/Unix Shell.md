---
author(s):
  - Userware
tags:
  - post-exploitation
  - enumeration-and-discovery
  - active-directory
  - staying-off-the-land
  - networking
  - network-protocols
  - msrpc
  - smb
  - ldap
  - windows
---
# Unix Shell

## 01 - MSRPC Port

### 1.1 - Samba Suite Utils

```
$ nmblookup -A <IP>
```

### 1.2 - Impacket

#### 1.2.1 - `netview`

Enumerate **common names** with `netview` impacket.

```
$ netview.py <domain>.<tld>/<username>:<password> -target <IP>

$ netview.py <domain>.<tld>/<username> -hashes :<nt_hash> -target <IP>
```

#### 2.2.2 - `net`

Enumerate **common names** with `net` impacket.

```
$ net.py <domain>/<username>:<password> -target <IP> computer

$ net.py <domain>/<username> -hashes :<nt_hash> -target <IP> computer
```

## 02 - SMB Port

```
$ netexec smb <IP> -u "<username>" -p "<password>" [-d <domain> | --local-auth] --computers
```

## 03 - LDAP Port

### 3.1 - `ldapsearch`

```
$ ldapsearch -x -D '<DOMAIN>\<username>' -w '' -b "CN=Computers,DC=<subdomain>,DC=<tdl>" -H ldap://<IP>
```

### 3.2 - `samba-tool`

TODO: Convert the commands from `ldapsearch`.

```
$ samba-tool user show <remote_username> --attributes=* -U [<domain>/]<username>@<password> -H ldap://<IP>
```