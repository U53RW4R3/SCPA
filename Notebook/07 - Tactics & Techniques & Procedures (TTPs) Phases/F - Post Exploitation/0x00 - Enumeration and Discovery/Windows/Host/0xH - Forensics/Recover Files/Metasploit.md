# Metasploit

## 01 - Enumerate Local Drives

```
msf > use post/windows/gather/forensics/enum_drives

msf post(windows/gather/forensics/enum_drives) > options

Module options (post/windows/gather/forensics/enum_drives):

   Name       Current Setting  Required  Description
   ----       ---------------  --------  -----------
   MAXDRIVES  10               no        Maximum physical drive number
   SESSION                     yes       The session to run this module on
  
  
View the full module info with the info, or info -d command.

msf post(windows/gather/forensics/enum_drives) > set session <session_ID>

msf post(windows/gather/forensics/enum_drives) > run
```

## 02 - Recover Delete Files

```
msf > use post/windows/gather/forensics/recovery_files

msf post(windows/gather/forensics/recovery_files) > options

Module options (post/windows/gather/forensics/recovery_files):

   Name     Current Setting  Required  Description
   ----     ---------------  --------  -----------
   DRIVE    C:               yes       Drive you want to recover files from.
   FILES                     no        ID or extensions of the files to recover in a comma separated way. Let empty to enumerate deleted files.
   SESSION                   yes       The session to run this module on
   TIMEOUT  3600             yes       Search timeout. If 0 the module will go through the entire $MFT.
  
  
View the full module info with the info, or info -d command.

msf post(windows/gather/forensics/recovery_files) > set session <session_ID>

msf post(windows/gather/forensics/recovery_files) > set files <1234567>,<1234567>

msf post(windows/gather/forensics/recovery_files) > set drive <new_drive_letter>

msf post(windows/gather/forensics/recovery_files) > run
```

---
## References

### Shell is Coming

- [Shell is Coming: Metasploit Forensics - Recovery deleted files (NTFS)](https://www.shelliscoming.com/2013/05/metasploit-forensics-recovery-deleted.html)