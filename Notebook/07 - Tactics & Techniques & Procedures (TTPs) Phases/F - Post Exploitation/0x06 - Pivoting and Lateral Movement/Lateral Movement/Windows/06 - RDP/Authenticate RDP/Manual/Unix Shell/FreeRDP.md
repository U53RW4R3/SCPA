---
author(s):
  - Userware
tags:
  - post-exploitation
  - pivot
  - lateral-movement
  - socks-proxy
  - windows
---
# FreeRDP

## 01 - Pivoting with RDP via SOCKS Proxy

Builtin SOCKS proxy feature.

```
$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /sec:<rdp | tls | nla> /proxy:socks5://[<username>:<password>@]<IP>:<PORT> /u:"<username>" /p:"<password>" /v:<IP>:[<PORT>]

$ xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /sec:<rdp | tls | nla> /proxy:http://[<username>:<password>@]<IP>:<PORT> /u:"<username>" /p:"<password>" /v:<IP>:[<PORT>]
```

With [[Proxychains|proxychains]].

```
$ proxychains xfreerdp /kbd:US /clipboard /compression /dynamic-resolution /sec:<rdp | tls | nla> /proxy:socks5://<IP>:<PORT> /u:"<username>" /p:"<password>" /v:<IP>:[<PORT>]
```

## 02 - OPSEC Consideration

Change your Linux `hostname` to the same target workstation to spoof the event logs.

```
$ hostnamectl hostname "<windows_workstation_name_to_spoof>"

$ sudo nmtui-hostname
```

Or you can append it in a line.

```
# echo "<windows_workstation_name_to_spoof>" > /etc/hostname

# hostname -F /etc/hostname
```

Once you're changed the `hostname`. Restart the terminal to apply it.

```
$ reset
```

---
## References

- [FreeRDP User Manual](https://github.com/awakecoding/FreeRDP-Manuals/blob/master/User/FreeRDP-User-Manual.markdown)

- [Infinite Logins: Pass the Hash Attack with RDP](https://infinitelogins.com/2021/02/20/pass-the-hash-attack-with-rdp/)

- [Hacktricks: Pentesting RDP](https://book.hacktricks.xyz/pentesting/pentesting-rdp)

- [Make FreeRDP Prompt User for Username and Password](https://unix.stackexchange.com/questions/119880/make-freerdp-prompt-user-for-username-and-password)