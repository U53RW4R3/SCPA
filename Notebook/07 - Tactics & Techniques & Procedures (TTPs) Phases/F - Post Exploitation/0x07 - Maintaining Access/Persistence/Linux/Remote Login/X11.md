# X11

## 01 - Configure the settings.

### 1.1 - LightDM

```
$ cat /etc/lightdm/lightdm.conf
..[omitted]..
xserver-allow-tcp=true
..[omitted]..
```

## 1.2 - GDM

```
$ cat /etc/gdm3/custom.conf
[daemon]
WaylandEnable=false
 
[security]
DisallowTCP=false
 
[XDMCPServer]
enabled=true
 
[xdmcp]
Enable=true
Port=177
DisplaysPerHost=10
```

Modify the shell script to include a `-listen tcp` statement.

```
$ cat /usr/bin/Xorg
#!/bin/sh
#
# Execute Xorg.wrap if it exists otherwise execute Xorg directly.
# This allows distros to put the suid wrapper in a separate package.
 
basedir=/usr/lib/xorg
if [ -x "$basedir"/Xorg.wrap ]; then
    exec "$basedir"/Xorg.wrap "$@" -listen tcp
else
    exec "$basedir"/Xorg "$@" -listen tcp
```

## 02 - Enable the service

Restart the service.

```
$ sudo systemctl restart lightdm.service

$ sudo service lightdm start
```

Disable access control. Then you can authenticate it.

```
$ xhost +
```

## 03 - Disable the service

```
$ xhost
```

---
## References

- [[07 - Tactics & Techniques & Procedures (TTPs) Phases/C - Initial Access/0x00 - Exploitation/0xE - Remote Services Exploitation/X11|Remote Services Exploitation: X11]]