# Change Directory

## C Runtime

```c
#include <stdio.h>
#include <direct.h>
#include <errno.h>

int main() {
    char buffer[1024];

    char *new_directory = "C:\\path\\to\\directory\\";

    if (_chdir(new_directory) == -1) {
        printf("Change current working directory failed.\n");

        if (errno == ENOENT)
            printf("Path not found: %s\n", new_directory);

        return 1;
    }

    if (_getcwd(buffer, 1024) == NULL) {
        printf("Get current working directory failed.\n");
        return 1;
    }

    printf("Current working directory: \n\n%s\n\n", buffer);
}
```

## WinAPI

```c
#include <stdio.h>
#include <windows.h>

#define PATH 4096

int main(int argc, char *argv[]) {
    char location[PATH];

    if (argc != 2) {
        fprintf(stderr, "Usage: %s C:\\path\\to\\directory\\\n", argv[0]);
        return 1;
    }

    // Get the current directory
    DWORD size = GetCurrentDirectory(PATH, location);
    if (size == 0 || size > PATH) {
        fprintf(stderr, "GetCurrentDirectory failed: %lu\n", GetLastError());
        return 1;
    }
    printf("Current Directory: %s\n", location);

    // Change to the directory provided as a command-line argument
    if (!SetCurrentDirectory(argv[1])) {
        fprintf(stderr, "SetCurrentDirectory failed: %lu\n", GetLastError());
        return 1;
    }

    // Get the new current directory
    size = GetCurrentDirectory(PATH, location);
    if (size == 0 || size > PATH) {
        fprintf(stderr, "GetCurrentDirectory failed: %lu\n", GetLastError());
        return 1;
    }
    printf("Changed to Directory: %s\n", location);

    return 0;
}
```

---
## References

### MalAPI

- [MalAPI: `SetCurrentDirectory`](https://malapi.io/winapi/SetCurrentDirectory)

### Tenouk

- [Tenouk: ModuleD1](https://www.tenouk.com/ModuleD1.html)

- [Tenouk: ModuleE1](https://www.tenouk.com/ModuleE1.html)

### InstallSetupConfig

- [InstallSetupConfig: Windows Directory Management 3](https://www.installsetupconfig.com/win32programming/windowsdirectoryapis3_2.html)

- [InstallSetupConfig: Windows Directory Management 8](https://www.installsetupconfig.com/win32programming/windowsdirectoryapis3_7.html)