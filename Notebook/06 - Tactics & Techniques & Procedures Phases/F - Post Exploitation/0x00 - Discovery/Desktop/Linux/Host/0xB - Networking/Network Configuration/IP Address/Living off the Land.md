---
author(s):
  - Userware
tags:
  - post-exploitation
  - discovery
  - living-off-the-land
  - networking
  - linux
---
# Living off the Land

## 01 - IP Address

```
$ ifconfig -a

$ ip address

$ ip -brief address

$ nmcli dev show
```

### 1.1 - IPv4 Address

```
$ ifconfig | grep "inet" | grep "broadcast" | awk '{print $2}'

$ ifconfig -a | awk '/(inet)(.*)broadcast/ {print $2}'
```

```
$ ifconfig | grep -v 127.0.0.1 | grep -Eo "([0-9]{1,3}\.){3}[0-9]{1,3}" | awk '{print $2}'

$ ifconfig | grep -v 127.0.0.1 | grep -Eo "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" | awk '{print $2}'

$ ip address | grep -v 127.0.0.1 | grep -Eo "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b"

$ ip address | grep -v 127.0.0.1 | grep -Eo "(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"
```

```
$ ip -4 -o address | awk '{print $4}' | cut -d "/" -f 1

$ ip -f inet address | awk '/inet / { print $2 }'

$ ip address | awk '$1 == "inet" && $3 == "brd" { sub (/\/.*/,""); print $2 }'

$ ip address | awk -- '$1 == "inet" && $3 == "brd" { split($2,a,"/"); print a[1]; }'

$ ip address | egrep '^ *inet' | grep brd | awk -- '{ print $2; }' | sed -e 's:/[0-9]*$::'

$ awk '/32 host/ { print f } {f=$2}' /proc/net/fib_trie | sort -u
```

### 1.2 - Retrieve Netblocks

```
$ grep -Eo "([0-9]{1,3}\.){3}[0-9]{1,3}/[0-9]{1,2}" file.txt

$ grep -Eo '[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/[0-9]{1,2}' file.txt

$ grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}/[0-9]{1,2}' file.txt
```

## 02 - Resolve DNS

```
$ getent ahostsv4 <host>
```

## 03 - Network Configuration

```
$ cat /etc/network/interfaces

$ cat /etc/sysconfig/network

$ cat /etc/networks
```

## 04 - Logged on Users

```
$ last -i
```

---
## References

### Hacktricks

- [Hacktricks: Useful Linux Commands](https://book.hacktricks.wiki/en/linux-hardening/useful-linux-commands.html)