# Go

```go
package main

import (
    "fmt"
    "log"
    "unsafe"

    "golang.org/x/sys/windows"
)

const (
    IDOK     = 1
    IDCANCEL = 2
)

var (
    moduser32      = windows.NewLazySystemDLL("user32.dll")
    procMessageBox = moduser32.NewProc("MessageBoxW")
)

func MessageBox(hwnd windows.Handle, text, caption string, flags uint32) (int, error) {
    t, _ := windows.UTF16PtrFromString(text)
    c, _ := windows.UTF16PtrFromString(caption)

    ret, _, err := procMessageBox.Call(
        uintptr(hwnd),
                                       uintptr(unsafe.Pointer(t)),
                                       uintptr(unsafe.Pointer(c)),
                                       uintptr(flags),
    )

    // In Win32, a return of 0 is a failure
    if ret == 0 {
        return 0, err
    }

    return int(ret), nil
}

func main() {
    result, err := MessageBox(
        0,
        "This works now!",
        "Success",
        windows.MB_OK|windows.MB_ICONINFORMATION,
    )

    if err != nil {
        log.Fatalf("Error: %v", err)
    }

    if result == IDOK {
        fmt.Println("User clicked the OK button")
    }
}
```