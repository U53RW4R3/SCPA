# Create Processes

## Spawn Process

### WinAPI

```c
#include <stdio.h>
#include <windows.h>
#include <winbase.h>
#include <errhandlingapi.h>

#pragma comment(lib, "kernel32.lib")

int main() {
    // Create process information structure
    PROCESS_INFORMATION process_information;
    
    // Create startup information structure
    STARTUPINFO startupinfo;
    ZeroMemory(&startupinfo, sizeof(startupinfo));
    startupinfo.cb = sizeof(startupinfo);
    
    // Specify the command to be executed
    TCHAR command[] = TEXT("notepad.exe");

    printf("[*] Spawning process...")
    // Spawn a new process
    if (!CreateProcessA(NULL, command, NULL, NULL, FALSE, 0, NULL, NULL, &startupinfo, &process_information)) {
        printf("[-] Failed to create a process. Error code: %s\n", GetLastError());
        return 1;
    }
    
    printf("[+] Process spawned!");
    
    // Wait for the process to finish executing
    WaitForSingleObject(process_information.hProcess, INFINITE);
    
    // Close process and thread handles
    CloseHandle(process_information.hProcess);
    CloseHandle(process_information.hThread);
    
    return 0;
}
```

---
## References

### Tenouk

- [Tenouk: Processes and Threads - WinAPI - Part 6](https://www.tenouk.com/ModuleU.html)

- [Tenouk: Processes and Threads - WinAPI - Part 9](https://www.tenouk.com/ModuleU3.html)

- [Tenouk: Processes and Threads - Synchronization - Part 1](https://www.tenouk.com/ModuleV.html)

### Cocomelonc

- [Cocomelonc: Simple C++ reverse shell for windows](https://cocomelonc.github.io/tutorial/2021/09/15/simple-rev-c-1.html)

### sid4hack

- [RED TEAM: Malware Development - Part 3](https://sid4hack.medium.com/malware-development-part-3-669bebef79c4)