# Command Execution

## C Runtime

```c
#include <process.h>

int main() {
	char command[50] = "ls -lah\0";

	system(command);
	return 0;
}
```

Compile the payload depending on the operating system you want to target.

```
$ x86_64-w64-mingw32-gcc -o payload.exe payload.c
```

## WinAPI

```c
#include <windows.h>
#include <winbase.h>

#pragma comment(lib, "kernel32.lib")

WinExec()
```

```
$ x86_64-w64-mingw32-gcc -l kernel32 -o payload.exe payload.c
```

---
## References

### Microsoft

- [Microsoft Documentation: `system` and `_wsystem`](https://learn.microsoft.com/en-us/cpp/c-runtime-library/reference/system-wsystem?view=msvc-170)

### MalAPI

- [MalAPI: WinExec](https://malapi.io/winapi/WinExec)