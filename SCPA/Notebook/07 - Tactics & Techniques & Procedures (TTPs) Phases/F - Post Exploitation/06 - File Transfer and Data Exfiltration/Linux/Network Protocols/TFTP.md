# TFTP

## 01 - Server Setup

### 1.1 - Unix Shell

TODO: Setup TFTP server manually (see references)

### 1.2 - Metasploit

- **MSF TFTP File Transfer Utility Auxiliary Module**

TODO: Provide a step by step approach with this auxiliary module

```
msf > use auxiliary/admin/tftp/tftp_transfer_util

Module options (auxiliary/admin/tftp/tftp_transfer_util):

   Name             Current Setting  Required  Description
   ----             ---------------  --------  -----------
   FILEDATA                          no        Data to upload in lieu of a real local file.
   FILENAME                          no        The local filename
   LHOST                             no        The local address the TFTP client should bind to
   LPORT                             no        The local port the TFTP client should listen on (default is random)
   MODE             octet            no        The TFTP mode; usual choices are netascii and octet.
   REMOTE_FILENAME                   no        The remote filename
   RHOST                             yes       The remote TFTP server
   RPORT            69               yes       The target port


Auxiliary action:

   Name    Description
   ----    -----------
   Upload  Upload FILENAME as REMOTE_FILENAME to the server.



View the full module info with the info, or info -d command.
  
msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) >

msf auxiliary(admin/tftp/tftp_transfer_util) > run
```

- **MSF TFTP File Server Auxiliary Module**

```
msf > use auxiliary/server/tftp
msf auxiliary(server/tftp) > options 

Module options (auxiliary/server/tftp):

   Name        Current Setting  Required  Description
   ----        ---------------  --------  -----------
   OUTPUTPATH  /tmp             yes       The directory in which uploaded files will be written.
   SRVHOST     0.0.0.0          yes       The local host to listen on.
   SRVPORT     69               yes       The local port to listen on.
   TFTPROOT    /tmp             yes       The TFTP root directory to serve files from


Auxiliary action:

   Name     Description
   ----     -----------
   Service  Serve files via TFTP



View the full module info with the info, or info -d command.

msf auxiliary(server/tftp) > set tftproot </path/to/directory>

msf auxiliary(server/tftp) > set outputpath </path/to/directory>

msf auxiliary(server/tftp) > set srvhost <IP>

msf auxiliary(server/tftp) > set srvport <PORT>

msf auxiliary(server/tftp) > run
```

---
## References

- [Hacktricks 69 UDP TFTP](https://book.hacktricks.xyz/pentesting/69-udp-tftp)

- [Setup TFTP Server on Linux](https://www.makeuseof.com/set-up-tftp-server-on-linux/)